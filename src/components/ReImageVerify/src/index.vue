<script setup lang="ts">
import { watch, ref, onMounted } from "vue";
import { getImgCode } from "./hooks";
import _ from "lodash";
defineOptions({
  name: "ReImageVerify",
});
onMounted(() => {
  if (!getImgCode()) {
    let imgElement = document.getElementById("captchaCanvas");
    console.log("ğŸš€ğŸš€ğŸš€ ~ onMounted ~ imgElementğŸš€ğŸš€ğŸš€", imgElement);
    imgElement.innerHTML = "è·å–éªŒè¯ç å¤±è´¥,ç‚¹å‡»é‡è¯•";
  }
});
const handleRefresh = () => {
  _.debounce(getImgCode, 800)();
};
defineExpose({ getImgCode });
</script>

<template>
  <div>
    <img id="captchaCanvas" @click="handleRefresh" />
    <!-- <el-button type="primary" :text="true" @click="handleRefresh"
      >ç‚¹å‡»é‡è¯•</el-button
    > -->
  </div>
</template>
